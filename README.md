# Quiz Api

<h2>Запуск проекта</h2>

В консоли необходимо перейти в директорию проекта и выполнить следующие команды:
<ul>
  <li><code>python -m venv venv</code> - установка виртуального окружения</li>
  <li><code>source venv/Scripts/activate</code> - активация виртуального окружения</li>
  <li><code>pip install -r requirements.txt</code> - установка зависимостей</li>
  <li><code>cd quiz_api/</code></li>
  <li><code>python manage.py migrate</code> - миграция базы данных</li>
  <li><code>python manage.py runserver</code> - запуск сервера</li>
</ul>

<h2>Администрирование</h2>

Для создания пользователя с правами администратора в консоли нужно выполнить команду
<code>python manage.py createsuperuser</code>
Затем указать имя пользователя, e-mail, пароль (2 раза).

Админ.панель находится по адресу http://127.0.0.1:8000/admin/

Раздел "Квизы" ( http://127.0.0.1:8000/admin/quizzes/quiz/ ) содержит список всех квизов, которые можно отсортировать по названию или описанию, также работает поиск по этим полям и сортировка по дате. Для добавления нового квиза можно воспользоваться кнопкой "Добавить квиз" справа вверху. Необходимо заполнить поля "Название", "Описание", "Дата начала", "Дата окончания", затем нажать на кнопку "Сохранить". Изменить дату начала при редактировании ранее созданного квиза нельзя.

Раздел "Вопросы" ( http://127.0.0.1:8000/admin/quizzes/question/ ) содержит список всех вопросов, входящих в квизы. Поиск работает по тексту вопроса. Справа вверху также есть кнопка для добавления нового вопроса и фильтр по квизам.
Поля:
PK - уникальный идентификатор вопроса
Порядок сортировки - по умолчанию вопросы сортируются по PK, изменить это можно указав в данном поле числовое значение. Если не указывать - автоматически будет задано "0".
Квиз - к какому квизу относится данный вопрос. Также в этом месте можно изменить квиз, удалить его или добавить новый.
Текст вопроса
Тип вопроса - текстовое поле, выбор одного варианта или множественный выбор
Ответ на вопрос - формат JSON
При удалении квиза все связанные с ним вопросы остаются. Это можно изменить, поменяв в модели <code>Question on_delete=models.SET_NULL</code> на <code>on_delete=models.CASCADE</code>)

Раздел "Прохождения" ( http://127.0.0.1:8000/admin/quizzes/attempt/ ) содержит список с результатами пройденных тестов.
Раздел "Ответы" ( http://127.0.0.1:8000/admin/quizzes/answer/ ) - подробная информация об ответах пользователя

<h2>API</h2>

API доступно по адресу http://127.0.0.1:8000/

Получение списка активных опросов (GET):
Список всех активных квизов - http://127.0.0.1:8000/api/quiz/ (отфильтрованы по дате и времени окончания, прошедшие вопросы не отображаются)
Ссылка на квиз - http://127.0.0.1:8000/api/quiz/{идентификатор_квиза}/

Получение результатов (GET):
Список всех результатов - http://127.0.0.1:8000/attempt/
Список результатов пользователя - http://127.0.0.1:8000/attempt/?user_id={идентификатор пользователя}

Прохождение опроса (POST):
http://127.0.0.1:8000/attempt/
